<UserControl x:Class="Converto_IT008_WPF.Views.UserViews.MyAccount"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Converto_IT008_WPF.Views.UserViews"
             xmlns:custom="clr-namespace:PlaceholderTextBoxControl"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:fa="clr-namespace:FontAwesome.WPF;assembly=FontAwesome.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="1200" d:DesignWidth="1000"
             Background="{StaticResource Brush.MainBG}">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Converto_IT008_WPF;component/Resources/Colors.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="30" />
                    </Grid.ColumnDefinitions>
                    <Border x:Name="Border" 
                            Grid.ColumnSpan="2"
                            CornerRadius="6"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            BorderThickness="0" />

                    <Path x:Name="Arrow"
                          Grid.Column="1" 
                          Fill="White"
                          HorizontalAlignment="Center" 
                          VerticalAlignment="Center"
                          Data="M0,0 L5,5 L10,0"
                          Stroke="White"
                          StrokeThickness="1"/>
                </Grid>
            </ControlTemplate>

            <Style x:Key="FlatComboBoxStyle" TargetType="{x:Type ComboBox}">
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ComboBox}">
                            <Grid>
                                <ToggleButton Name="ToggleButton" 
                                              Template="{StaticResource ComboBoxToggleButton}" 
                                              Grid.Column="2" 
                                              Focusable="false"
                                              IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                                              ClickMode="Press"/>

                                <ContentPresenter Name="ContentSite" 
                                                  IsHitTestVisible="False" 
                                                  Content="{TemplateBinding SelectionBoxItem}"
                                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                  Margin="10,0,30,0"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Left" />

                                <Popup Name="Popup"
                                       Placement="Bottom"
                                       IsOpen="{TemplateBinding IsDropDownOpen}"
                                       AllowsTransparency="True" 
                                       Focusable="False"
                                       PopupAnimation="Slide">
                                    
                                    <Grid Name="DropDown"
                                          SnapsToDevicePixels="True"
                                          MinWidth="{TemplateBinding ActualWidth}"
                                          MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                        
                                        <Border x:Name="DropDownBorder"
                                                Background="{StaticResource Brush.BG.Card}"
                                                BorderThickness="1"
                                                BorderBrush="#33FFFFFF"
                                                CornerRadius="6"/>
                                        
                                        <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                        </ScrollViewer>
                                    </Grid>
                                </Popup>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ItemContainerStyle">
                    <Setter.Value>
                        <Style TargetType="ComboBoxItem">
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="Padding" Value="10,8"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ComboBoxItem">
                                        <Border x:Name="bd" Background="Transparent" Padding="{TemplateBinding Padding}">
                                            <ContentPresenter />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bd" Property="Background" Value="#33FFFFFF"/>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="bd" Property="Background" Value="{StaticResource Brush.Brand}"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="SectionCardStyle" TargetType="Border">
                <Setter Property="Background" Value="{StaticResource Brush.BG.Shape}"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="BorderBrush" Value="#33FFFFFF"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="25"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
            </Style>

            <Style x:Key="InputLabelStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Secondary}"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Margin" Value="0,0,0,6"/>
            </Style>

            <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="20"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
            </Style>

            <Style x:Key="ScrollThumb" TargetType="{x:Type Thumb}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Thumb}">
                            <Grid Background="Transparent">
                                <Border x:Name="Border" 
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="4" 
                                    Width="8"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsDragging" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#FFFFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="ModernScrollBarStyle" TargetType="{x:Type ScrollBar}">
                <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false"/>
                <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
                <Setter Property="Width" Value="10"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="#44FFFFFF"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ScrollBar}">
                            <Grid x:Name="Bg" SnapsToDevicePixels="true" Background="{TemplateBinding Background}">
                                <Track x:Name="PART_Track" IsDirectionReversed="true" IsEnabled="{TemplateBinding IsMouseOver}">
                                    <Track.DecreaseRepeatButton>
                                        <RepeatButton Command="{x:Static ScrollBar.LineUpCommand}" Opacity="0" Visibility="Collapsed"/>
                                    </Track.DecreaseRepeatButton>
                                    <Track.IncreaseRepeatButton>
                                        <RepeatButton Command="{x:Static ScrollBar.LineDownCommand}" Opacity="0" Visibility="Collapsed"/>
                                    </Track.IncreaseRepeatButton>
                                    <Track.Thumb>
                                        <Thumb Style="{StaticResource ScrollThumb}" Background="{TemplateBinding Foreground}"/>
                                    </Track.Thumb>
                                </Track>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter Property="Foreground" Value="#88FFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">

        <ScrollViewer.Resources>
            <Style TargetType="ScrollBar" BasedOn="{StaticResource ModernScrollBarStyle}"/>
        </ScrollViewer.Resources>

        <Border Background="{StaticResource Brush.MainBG}" Padding="40">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,30">
                    <TextBlock Text="UserProfile" FontSize="32" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Manage your personal information, account details, and preferences." 
                               FontSize="14" Foreground="{StaticResource Brush.Text.Secondary}" Margin="0,5,0,0"/>
                </StackPanel>

                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <Border Background="{StaticResource Brush.BG.Shape}" 
                                CornerRadius="8" 
                                BorderBrush="#33FFFFFF" 
                                BorderThickness="1"
                                Padding="20"
                                Height="335">
                            
                            <Grid>
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Grid Width="140" Height="140" Margin="0,0,0,20">
                                        <Ellipse Stroke="{StaticResource Brush.Brand}" StrokeThickness="2">
                                            <Ellipse.Fill>
                                                <ImageBrush ImageSource="{Binding AvatarUrl}" Stretch="UniformToFill"/>
                                            </Ellipse.Fill>
                                        </Ellipse>
                                        <Border Background="{StaticResource Brush.Brand}" 
                                                Width="30" Height="30" 
                                                CornerRadius="15" 
                                                HorizontalAlignment="Right" 
                                                VerticalAlignment="Bottom" 
                                                Cursor="Hand">

                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick" Command="{Binding ChangeAvatarUrlCommand}"/>
                                            </Border.InputBindings>
                                            
                                            <fa:FontAwesome Icon="Pencil" Foreground="White" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                        </Border>
                                    </Grid>

                                    <TextBlock Text="{Binding Username}" FontSize="24" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding Email}" FontSize="14" Foreground="{StaticResource Brush.Text.Secondary}" HorizontalAlignment="Center"/>
                                </StackPanel>


                                <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Center" Orientation="Horizontal">
                                    <TextBlock Text="Member Since:" 
                                               FontSize="13" 
                                               Foreground="{StaticResource Brush.Text.Secondary}" 
                                               VerticalAlignment="Bottom" 
                                               HorizontalAlignment="Center" 
                                               Margin="0,0,7,0"
                                               Opacity="0.5"/>
                                
                                    <TextBlock Text="{Binding MemberSince, StringFormat='dd/MM/yyyy'}" 
                                               FontSize="13" 
                                               Foreground="{StaticResource Brush.Text.Secondary}" 
                                               VerticalAlignment="Bottom" 
                                               HorizontalAlignment="Center" 
                                               Opacity="0.5"/>
                                    
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>

                    <StackPanel Grid.Column="2">

                        <Border Style="{StaticResource SectionCardStyle}">
                            <StackPanel>
                                <Grid>
                                    <TextBlock Text="Personal Information" Style="{StaticResource SectionHeaderStyle}"/>
                                    <Button Content="Edit" 
                                            Foreground="{StaticResource Brush.Text.Secondary}" 
                                            Background="Transparent" 
                                            BorderThickness="0" 
                                            HorizontalAlignment="Right" 
                                            VerticalAlignment="Top" 
                                            Cursor="Hand">
                                        
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <StackPanel Orientation="Horizontal">
                                                    <fa:FontAwesome Icon="Pencil" FontSize="12"/>
                                                    <ContentPresenter Margin="10,0,5,0"/>
                                                </StackPanel>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="First Name" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderBrush="#33FFFFFF" BorderThickness="1">
                                            <custom:PlaceholderTextBox Text="{Binding FirstName}" 
                                                                       Placeholder="First Name" 
                                                                       Background="Transparent" 
                                                                       Foreground="White" 
                                                                       BorderThickness="0" 
                                                                       Padding="5,0" 
                                                                       VerticalContentAlignment="Center" 
                                                                       FontSize="14"/>
                                        </Border>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Last Name" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderBrush="#33FFFFFF" BorderThickness="1">
                                            <custom:PlaceholderTextBox Text="{Binding LastName}" 
                                                                       Placeholder="Last Name" 
                                                                       Background="Transparent" 
                                                                       Foreground="White" 
                                                                       BorderThickness="0" 
                                                                       Padding="5,0" 
                                                                       VerticalContentAlignment="Center" 
                                                                       FontSize="14"/>
                                        </Border>
                                    </StackPanel>
                                </Grid>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Email Address" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderBrush="#33FFFFFF" BorderThickness="1">
                                            <custom:PlaceholderTextBox Text="{Binding Email}" 
                                                                       Placeholder="Email" 
                                                                       Background="Transparent" 
                                                                       Foreground="White" 
                                                                       BorderThickness="0" 
                                                                       Padding="5,0" 
                                                                       VerticalContentAlignment="Center" 
                                                                       FontSize="14"/>
                                        </Border>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Phone Number" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderBrush="#33FFFFFF" BorderThickness="1">
                                            <custom:PlaceholderTextBox Text="{Binding PhoneNumber}" 
                                                                       Placeholder="Phone" 
                                                                       Background="Transparent" 
                                                                       Foreground="White" 
                                                                       BorderThickness="0" 
                                                                       Padding="5,0" 
                                                                       VerticalContentAlignment="Center" 
                                                                       FontSize="14"/>
                                        </Border>
                                    </StackPanel>
                                </Grid>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="City" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderBrush="#33FFFFFF" BorderThickness="1">
                                            <custom:PlaceholderTextBox Text="{Binding City}" 
                                                                       Placeholder="City" 
                                                                       Background="Transparent" 
                                                                       Foreground="White" 
                                                                       BorderThickness="0" 
                                                                       Padding="5,0" 
                                                                       VerticalContentAlignment="Center" 
                                                                       FontSize="14"/>
                                        </Border>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Birthday" Style="{StaticResource InputLabelStyle}"/>
                                        <Border Background="{StaticResource Brush.BG.Card}" CornerRadius="6" Height="42" BorderThickness="1" BorderBrush="#33FFFFFF">
                                            <DatePicker SelectedDate="{Binding DateOfBirth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        VerticalContentAlignment="Center"
                                                        Background="Transparent"
                                                        BorderThickness="0"
                                                        Padding="5,0"
                                                        Foreground="White">
                                                <DatePicker.Resources>
                                                    <Style TargetType="DatePickerTextBox">
                                                        <Setter Property="Foreground" Value="{Binding Foreground, RelativeSource={RelativeSource AncestorType=DatePicker}}"/>
                                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Setter Property="BorderThickness" Value="0"/>

                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="DatePickerTextBox">
                                                                    <Grid Background="Transparent">
                                                                        <ScrollViewer x:Name="PART_ContentHost" 
                                                                                      Background="Transparent" 
                                                                                      VerticalAlignment="Center"/>

                                                                        <TextBlock x:Name="PART_Watermark"
                                                                                   Text="dd/mm/yyyy"
                                                                                   Foreground="#88FFFFFF"
                                                                                   VerticalAlignment="Center"
                                                                                   IsHitTestVisible="False"
                                                                                   Margin="2,0,0,0">
                                                                            <TextBlock.Style>
                                                                                <Style TargetType="TextBlock">
                                                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource TemplatedParent}}" Value="">
                                                                                            <Setter Property="Visibility" Value="Visible"/>
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </TextBlock.Style>
                                                                        </TextBlock>
                                                                    </Grid>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </DatePicker.Resources>
                                            </DatePicker>
                                        </Border>
                                    </StackPanel>
                                </Grid>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">

                                    <Button Content="Cancel" 
                                            Foreground="White" 
                                            FontSize="14" FontWeight="SemiBold"
                                            Cursor="Hand" Margin="0,30,20,0"
                                            Command="{Binding CancelChangeInfoCommand}">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderThickness" Value="0" />

                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                                  VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>

                                    <Button Content="Save changes" 
                                            Command="{Binding SaveChangesCommand}"
                                            Foreground="White"
                                            FontSize="14" 
                                            Margin="0,30,0,0"
                                            HorizontalAlignment="Right"
                                            FontWeight="SemiBold"
                                            Padding="20,10"
                                            BorderThickness="0" 
                                            Cursor="Hand" 
                                            Height="33" 
                                            Width="145">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="{StaticResource Brush.Brand}" />
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#D90404"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>

                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>

                                    </Button>
                                </StackPanel>

                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource SectionCardStyle}">
                            <StackPanel>
                                <TextBlock Text="Password" Style="{StaticResource SectionHeaderStyle}"/>
                                <TextBlock Text="New Password" Style="{StaticResource InputLabelStyle}"/>
                                <Border Background="{StaticResource Brush.BG.Card}" 
                                        CornerRadius="6" 
                                        Height="42" 
                                        BorderBrush="#33FFFFFF" 
                                        BorderThickness="1" 
                                        Margin="0,0,0,15">
                                    
                                    <PasswordBox Background="Transparent" 
                                                 Foreground="White" 
                                                 BorderThickness="0" 
                                                 Padding="10,0" 
                                                 VerticalContentAlignment="Center" 
                                                 FontSize="14"
                                                 PasswordChanged="PasswordBox_PasswordChanged"
                                                 PreviewMouseWheel="PasswordBox_PreviewMouseWheel"/>
                                </Border>

                                <TextBlock Text="Confirm New Password" Style="{StaticResource InputLabelStyle}"/>
                                <Border Background="{StaticResource Brush.BG.Card}" 
                                        CornerRadius="6" 
                                        Height="42" 
                                        BorderBrush="#33FFFFFF" 
                                        BorderThickness="1" 
                                        Margin="0,0,0,25">
                                    
                                    <PasswordBox Background="Transparent" 
                                                 Foreground="White" 
                                                 BorderThickness="0" 
                                                 Padding="10,0" 
                                                 VerticalContentAlignment="Center" 
                                                 FontSize="14"
                                                 PasswordChanged="PasswordBox_PasswordChanged_1"
                                                 PreviewMouseWheel="PasswordBox_PreviewMouseWheel"/>
                                </Border>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Content="Cancel" 
                                            Foreground="White" 
                                            FontSize="14" FontWeight="SemiBold"
                                            Cursor="Hand" Margin="0,0,20,0"
                                            VerticalAlignment="Center"
                                            Command="{Binding CancelChangePasswordCommand}">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderThickness" Value="0" />

                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                                  VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>

                                    <Button Content="Change Password"  
                                            Command="{Binding ChangePasswordCommand}"
                                            Foreground="White"
                                            FontSize="14" 
                                            FontWeight="SemiBold"
                                            Padding="20,10"
                                            BorderThickness="0" 
                                            Cursor="Hand" 
                                            Height="33" 
                                            Width="145">

                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="{StaticResource Brush.Brand}" />
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#D90404"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>

                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource SectionCardStyle}">
                            <StackPanel>
                                <TextBlock Text="Preferences" Style="{StaticResource SectionHeaderStyle}"/>

                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Default Output Folder" 
                                                   Style="{StaticResource InputLabelStyle}" 
                                                   FontSize="15" 
                                                   FontWeight="SemiBold" 
                                                   Foreground="White"/>
                                        
                                        <TextBlock Text="{Binding DefaultOutputFolder}" Foreground="{StaticResource Brush.Text.Secondary}" FontSize="14" Margin="0,5,0,0"/>
                                    </StackPanel>

                                    <Button Content="Change" 
                                            Foreground="White" 
                                            FontSize="14" FontWeight="SemiBold"
                                            Cursor="Hand" Margin="0,0,20,0"
                                            HorizontalAlignment="Right"
                                            Command="{Binding ChangeDefaultOutputFolderCommand}">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderThickness" Value="0" />

                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                                  VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="Languages" 
                                               VerticalAlignment="Center" 
                                               Style="{StaticResource InputLabelStyle}" 
                                               FontSize="15" 
                                               FontWeight="SemiBold" 
                                               Foreground="White"/>

                                    <Border Grid.Column="1" 
                                            Background="{StaticResource Brush.BG.Card}" 
                                            CornerRadius="6" 
                                            BorderBrush="#33FFFFFF" 
                                            BorderThickness="1" 
                                            Width="180" 
                                            Height="40">

                                        <ComboBox Style="{StaticResource FlatComboBoxStyle}"
                                                  ItemsSource="{Binding Languages}"
                                                  SelectedItem="{Binding Language}">

                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="SelectionChanged">
                                                    <i:InvokeCommandAction Command="{Binding ChangeLanguageCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </ComboBox>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#2A1010" 
                                CornerRadius="8" 
                                BorderBrush="#4A1919" 
                                BorderThickness="1"
                                Padding="25">

                            <StackPanel>
                                <TextBlock Text="Delete Account" FontSize="20" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>

                                <TextBlock Text="Permanently delete your account and all associated data." 
                                           Foreground="{StaticResource Brush.Text.Secondary}" 
                                           Margin="0,0,0,5"/>

                                <TextBlock Text="This action can not be undone" 
                                           Foreground="{StaticResource Brush.Text.Secondary}" 
                                           Margin="0,0,0,20"/>

                                <Button Content="Delete My Account"
                                        Command="{Binding DeleteAccountCommand}"
                                        HorizontalAlignment="Left"
                                        Foreground="White"
                                        FontSize="14"
                                        FontWeight="SemiBold"
                                        Padding="20,10"
                                        BorderThickness="0"
                                        Cursor="Hand" 
                                        Height="29" 
                                        Width="159">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="#991B1B" />
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#891B1F"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>

                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="6">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>
                        
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>
    </ScrollViewer>
</UserControl>